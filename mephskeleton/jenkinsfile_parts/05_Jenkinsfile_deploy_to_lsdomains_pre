       stage('Zip lsdomains pre') {
            when {  expression { return env.GIT_BRANCH.contains('/release/') || env.GIT_BRANCH.contains('/hotfix/') } }
            steps
            {
              withCredentials([
                        usernamePassword(credentialsId: '#cicd.sysops.s3.deploy#', usernameVariable: 'CICD_S3_USER', passwordVariable: 'CICD_S3_PASS'),
                        usernamePassword(credentialsId: '#cicd.sysops#', usernameVariable: 'CICD_USER', passwordVariable: 'CICD_PASS')
                        ])
              {
                //milestone(7)
                  echo 'Desplegamos en PRE lsdonains'
                  dir('./build_pipeline') {
                    sh './04_deploy_lsdomains.sh -f jenkins -e pre'
                    script
                    {
                        LAST_GROUPNAME = readFile('./tmp/zip_s3_files/LAST_GROUPNAME.txt').trim()
                        LAST_ARTIFACT = readFile('./tmp/zip_s3_files/LAST_ARTIFACT.txt').trim()
                    }
                  }
               }
            }
       }


       stage('Deploy lsdomains pre') {
            when {  expression { return env.GIT_BRANCH.contains('/release/') || env.GIT_BRANCH.contains('/hotfix/') } }
            steps
            {
                //milestone(7)
                echo 'Desplegamos en PRE lsdonains {' +  LAST_GROUPNAME + '} y {' + LAST_ARTIFACT + '}'
                dir('./build_pipeline') {
                    build job:'softbase/utils/deploy_lsdomains2_pre', parameters: [[$class: 'StringParameterValue', name: 'GROUPNAME', value: LAST_GROUPNAME],[$class: 'StringParameterValue', name: 'ARTIFACT', value: LAST_ARTIFACT]]
                }
            }
       }
